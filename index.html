<!DOCTYPE html>
<html>
    <head>
        <title>!2048</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" type="image/png" href="favicon.png"/>
        <link href="https://fonts.googleapis.com/css2?family=Arimo:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
        <script src="https://kit.fontawesome.com/99d22b8049.js" crossorigin="anonymous"></script>
        <style type="text/css">
            * {
                box-sizing: border-box;
            }

            .row {
                margin: 1px 1px;
            }

            .row::after {
                content: "";
                clear: both;
                display: table;
            }

            [class*="col-"] {
                float: left;
                padding: 15px;
            }

            .col-1 {
                width: 5%;
            }

            .col-2 {
                width: 10%;
            }

            .col-3 {
                width: 15%;
            }

            .col-4 {
                width: 20%;
            }

            .col-5 {
                width: 25%;
            }

            .col-6 {
                width: 30%;
            }

            .col-7 {
                width: 35%;
            }

            .col-8 {
                width: 40%;
            }

            .col-9 {
                width: 45%;
            }

            .col-10 {
                width: 50%;
            }

            .col-11 {
                width: 55%;
            }

            .col-12 {
                width: 60%;
            }

            .col-13 {
                width: 65%;
            }

            .col-14 {
                width: 70%;
            }

            .col-15 {
                width: 75%;
            }

            .col-16 {
                width: 80%;
            }

            .col-17 {
                width: 85%;
            }

            .col-18 {
                width: 90%;
            }

            .col-19 {
                width: 95%;
            }

            .col-20 {
                width: 100%;
            }

            body {
                margin: 0;
                background-color: yellow;
                font-family: 'Arimo', sans-serif;
                background-color: #2d2e30;
                color: #eeeeee;
            }

            #click {
                color: #66b21b;
                position: relative;
                margin: 10px auto;
                font-size: 1.3rem;
                line-height: 1.6;
                font-weight: bold;
                text-align: center;
            }

            .box {
                padding: 1px 0;
                max-width: 420px;
                min-height: 419px;
                background: #282828;
                margin: auto;
                user-select: none;
                border-radius: 8px;
            }

            #timerbox {
                max-width: 420px;
                margin: auto;
                margin-top: 20px;
            }

            .tile {
                display: none;
                background: #89808a;
                font-weight: bold;
                border-style: solid;
                border-color: rgb(75,28,108);
                border-radius: 8px;
                border-width: 2px;
                font-size: 1.5rem;
                text-align: center;
                vertical-align: middle;
            }

            .tile.col-4 {
                padding: 25px 0;
            }

            .tile.col-5 {
                padding: 36px 0;
            }

            .notile {
                display: inline-block;
                background-color: transparent !important;
                font-weight: bold;
                border-color: transparent;
            }

            .notile.col-4 {
                padding: 25px 0;
            }

            .notile.col-5 {
                padding: 36px 0;
            }

            .start {
                display: none;
				margin: auto;
                margin-top: 150px;
                color: rgb(226,120,2);
				border-radius: 40px;
				cursor:pointer;
				background-color: #282828;
				font-size:3rem;
				font-weight: bold;
				padding:16px 31px;
				text-decoration:none;
            }

            .start:focus {
                outline: none;
            }

            .result {
            	display: none;
                position: relative;
                margin: auto;
                margin-top: 140px;
                background-color: transparent;
                font-size: 4rem;
                border-color: transparent;
                text-align: center;
            }

            button {
                background-color: #4CAF50;
                border: none;
                color: white;
                padding: 12px 30px;
                text-align: center;
                text-decoration: none;
                display: block;
            }

            #header {
                text-align: center;
                font-size: 2rem;
                margin-top: 20px;
            }

            #bsdisp {
                display: none;
                position: fixed;
                top: 0px;
                left: 0px;
                width: 100vw;
                height: 100vh;
                background-color: rgba(0,0,0,0.7);
            }

            #bt {
                max-width: 300px;
                margin: auto;
                position: relative;
                top: 25vh;
                border-radius: 8px;
                border: 2px solid #50008c;
                padding-bottom: 10px;
                z-index: 2;
                background-color: #e6dcff;
                color: #50008c;
                text-align: center;
            }

            #bt h3 {
            	text-align: center; 
            	background-color: #8c5ac8; 
            	padding: 20px; 
            	font-weight: bold; 
            	font-size: 1.7rem;
            	border-top-left-radius: 8px;
            	border-top-right-radius: 8px;
            	margin-top: 0;
            }

            ol {
                text-align: center;
                list-style-position: inside;
                padding: 0;
                line-height: 1.6;
                font-size: 1.3rem;
                margin-top: 5px;
            }

            .close {
                color: #aaa;
                float: right;
                font-size: 28px;
                font-weight: bold;
                position: relative;
                top: 20px;
                right: 10px;
                color: black;
                cursor: pointer;
            }

            #tops {
            	position: relative;
            	top: 5px;
                color: #8c5ac8;
                text-align: right;
                font-size: 1.3rem;
                cursor: pointer;
            }

            #s4 {
                display: block;
                max-width: 110px;
                margin: auto;
                margin-top: 20px;
                text-align: center;
                cursor: pointer;
                color: #282828;
                font-size:1.2rem;
                font-weight: bold;
                padding:10px 30px;
                text-decoration:none;
                background-color: rgb(226,120,2);
                border-radius: 40px;
            }

            #s5 {
                display: none;
                max-width: 110px;
                margin: auto;
                margin-top: 20px;
                text-align: center;
                cursor: pointer;
                color: #282828;
                font-size:1.2rem;
                font-weight: bold;
                padding:10px 30px;
                text-decoration:none;
                background-color: rgb(226,120,2);
                border-radius: 40px;
            }

            #reset {
                display: none;
                font-size: 1.3rem;
                max-width: 110px;
                margin: auto;
                margin-top: 20px;
                text-align: center;
                cursor: pointer;
            }

            #reset img {
            	position: relative;
            	top: 5px;
            	transform: rotate(0deg);
            	transition-duration: 0.7s;
				transition-timing-function: ease-in-out;
            }

            #reset:hover img {
            	transform: rotate(-360deg);
				transition-duration: 0.7s;
				transition-timing-function: ease-in-out;
            }

            #b4 {
                display: block;
            }

            #b5 {
                display: none;
            }

            .choose {
                text-align: center;
            }

            .choose img {
                max-width: 60%;
                margin: 40px auto 30px auto;
            }

            #bs5 {
                display: none;
            }

            #bs4 .row {
                font-size: 1.2rem;
                font-weight: bold;
            }

            #bs5 .row {
                font-size: 1.2rem;
                font-weight: bold;
            }

            .vol {
                margin-top: 10px;
                cursor: pointer;
            }

            @media (max-width: 450px) {
                .box {
                    max-width: 90vw;
                    min-height: 85vw;
                }

                .tile.col-5 {
                    padding: 7.1vw 0;
                    font-size: 1.2rem;
                }

                .tile.col-4 {
                    padding: 5.1vw 0;
                    font-size: 1.2rem;
                }

                #click {
                    font-size: 1.1rem;
                }

                #bt {
                    max-width: 90vw;
                }

                .start {
                    margin-top: 30vw;
                    font-size: 3rem;
                }
            }
        </style>
    </head>
    <body>
        <div class="row" id="header">
        	<img src="logo.png" style="max-width: 100px">
		</div>
        <div id="timerbox" class="row">
            <div class="col-10" style="font-size: 1.3rem">
                <span style="color: #8c5ac8">Time<br></span>
                <div id="timer">0:00</div>
            </div>
            <div class="col-10" style="text-align: right;">
                <div id="tops">Top 5 Score</div>
                <div id="volon" class="vol" onclick="vol(true)">Sound on <i class="fas fa-volume-up"></i></div>
                <div id="voloff" class="vol" style="display: none;" onclick="vol(false)">Sound off <i class="fas fa-volume-mute" style="color: red"></i></div>
            </div>
        </div>
        <div id="click">Click the numbers as quickly as you can!
	</div>
        <div class="box" id="b4">
            <div id="result4" class="result">
                <span id="sh4">Your Score</span><br>
                <div id="res4">0.00</div>
            </div>
            <div class="row">
                <div class="tile col-5" id="t41"></div>
                <div class="tile col-5" id="t42"></div>
                <div class="tile col-5" id="t43"></div>
                <div class="tile col-5" id="t44"></div>
            </div>
            <div class="row">
                <div class="tile col-5" id="t45"></div>
                <div class="tile col-5" id="t46"></div>
                <div class="tile col-5" id="t47"></div>
                <div class="tile col-5" id="t48"></div>
            </div>
            <div class="row">
                <div class="tile col-5" id="t49"></div>
                <div class="tile col-5" id="t410"></div>
                <div class="tile col-5" id="t411"></div>
                <div class="tile col-5" id="t412"></div>
            </div>
            <div class="row">
                <div class="tile col-5" id="t413"></div>
                <div class="tile col-5" id="t414"></div>
                <div class="tile col-5" id="t415"></div>
                <div class="tile col-5" id="t416"></div>
            </div>
            <button onclick="start(4)" id="start4" class="start"></button>
            <div class="choose">
                <img src="b4.png">
                <div class="row">
                    <div class="col-4">&nbsp;</div>
                    <div class="col-2" onclick="change(5)" style="cursor: pointer;">&lt;</div>
                    <div class="col-8">Classic - 4&times;4</div>
                    <div class="col-2" onclick="change(5)" style="cursor: pointer;">&gt;</div>
                    <div class="col-4">&nbsp;</div>
                </div>
            </div>
        </div>
        <div class="box" id="b5">
            <div id="result5" class="result">
                <span id="sh5">Your Score</span><br>
                <div id="res5">0.00</div>
        
            </div>
            <div class="row">
                <div class="tile col-4" id="t51"></div>
                <div class="tile col-4" id="t52"></div>
                <div class="tile col-4" id="t53"></div>
                <div class="tile col-4" id="t54"></div>
                <div class="tile col-4" id="t55"></div>
            </div>
            <div class="row">
                <div class="tile col-4" id="t56"></div>
                <div class="tile col-4" id="t57"></div>
                <div class="tile col-4" id="t58"></div>
                <div class="tile col-4" id="t59"></div>
                <div class="tile col-4" id="t510"></div>
            </div>
            <div class="row">
                <div class="tile col-4" id="t511"></div>
                <div class="tile col-4" id="t512"></div>
                <div class="tile col-4" id="t513"></div>
                <div class="tile col-4" id="t514"></div>
                <div class="tile col-4" id="t515"></div>
            </div>
            <div class="row">
                <div class="tile col-4" id="t516"></div>
                <div class="tile col-4" id="t517"></div>
                <div class="tile col-4" id="t518"></div>
                <div class="tile col-4" id="t519"></div>
                <div class="tile col-4" id="t520"></div>
            </div>
            <div class="row">
                <div class="tile col-4" id="t521"></div>
                <div class="tile col-4" id="t522"></div>
                <div class="tile col-4" id="t523"></div>
                <div class="tile col-4" id="t524"></div>
                <div class="tile col-4" id="t525"></div>
            </div>
            <button id="start5" class="start"></button>
            <div class="choose">
                <img src="b5.png">
                <div class="row">
                    <div class="col-4">&nbsp;</div>
                    <div class="col-2" onclick="change(4)" style="cursor: pointer;">&lt;</div>
                    <div class="col-8">Big - 5&times;5</div>
                    <div class="col-2" onclick="change(4)" style="cursor: pointer;">&gt;</div>
                    <div class="col-4">&nbsp;</div>
                </div>
            </div>
        </div>
        <div>
            <button id="s5" class="start" onclick="start(5)">PLAY</button>
        </div>
        <div>
            <button id="s4" class="start" onclick="start(4)">PLAY</button>
        </div>
        <div class="row" id="reset">
        	<img src="reset.png" style="max-width: 25px;"> RESET
        </div>
        <div id="bsdisp">
            <div id="bt">
                <span class="close">&times;</span>
                <h3>BEST 5 TIME</h3>
                <div id="bs4">
                    <div class="row">
                        <div class="col-2">&nbsp;</div>
                        <div class="col-3" onclick="changebs(5)" style="cursor: pointer;">&lt;</div>
                        <div class="col-10">Classic - 4&times;4</div>
                        <div class="col-3" onclick="changebs(5)" style="cursor: pointer;">&gt;</div>
                    </div>
                    <div id="bscores4"></div>
                </div>
                <div id="bs5">
                    <div class="row">
                        <div class="col-2">&nbsp;</div>
                        <div class="col-3" onclick="changebs(4)" style="cursor: pointer;">&lt;</div>
                        <div class="col-10">Big - 5&times;5</div>
                        <div class="col-3" onclick="changebs(4)" style="cursor: pointer;">&gt;</div>
                    </div>
                    <div id="bscores5"></div>
                </div>
            </div>
        </div>
        <audio id="sound">
            <source src="sounds.mp3" type="audio/mpeg">
        </audio>
        <script type="text/javascript">

            var timer;
            var time = 0
            var count = 0;
            var i = 0;
            var best4, best5;
            var gsize, gno, max;

            var Ra = 140
              , Ga = 90
              , Ba = 200;
            var Rb = 80
              , Gb = 0
              , Bb = 140;
            var nos = []
              , ind = [];
            var box5, box4;

            if (typeof (Storage) !== "undefined") {
                best4 = window.localStorage.getItem("best4");
                best5 = window.localStorage.getItem("best5");
                if (best4 == null)
                    best4 = [];
                else {
                    best4 = best4.split(",");
                }
                if (best5 == null)
                    best5 = [];
                else {
                    best5 = best5.split(",");
                }
            }

            function vol(v) {
                var audio = document.getElementById("sound");
                if (v) {
                    document.getElementById("voloff").style.display = "block";
                    document.getElementById("volon").style.display = "none";
                    audio.muted = true;
                }
                else {
                    document.getElementById("volon").style.display = "block";
                    document.getElementById("voloff").style.display = "none";
                    audio.muted = false;
                }
            }

            function start_timer() {
                var ti = document.getElementById("timer");
                timer = setInterval(function() {
                    ti.innerHTML = time.toFixed(2);
                    time += 0.01;
                }, 10);
            }

            function newbest() {
                var best, nb = false;
                if(gsize==4) best = best4;
                else best = best5;
                if ((time - 0.01).toFixed(2) < best[0]) nb = true;
                best.push((time - 0.01).toFixed(2));
                best.sort();
                if (best.length > 5)
                    best = best.slice(0, 5);
                localStorage.setItem("best"+gsize, best.toString());
                var bscores = document.getElementById("bscores" + gsize);
                var bshtml = "<ol>";
                for (var y = 0; y < best.length; y++) {
                    bshtml += ("<li>" + best[y] + "</li>");
                }
                bscores.innerHTML = bshtml + "</ol>";
                return nb;
            }

            function start(s) {
                gsize = s;
                gno = (gsize*gsize);
                max = 30 + (gsize-4)*10;
                count = 0;
                num();
                var ti = 3;
                document.getElementById("s4").style.display = "none";
                document.getElementById("s5").style.display = "none";
                document.getElementById("reset").style.display = "block";
                document.getElementsByClassName("choose")[0].style.display = "none";
                document.getElementsByClassName("choose")[1].style.display = "none";
                var start = document.getElementById("start"+gsize);
                start.style.display = "block";
                var x = setInterval(function() {
                    start.innerHTML = ti;
                    if (ti == 0) {
                        clearInterval(x);
                        start.style.display = "none";
                        for (var i = 1; i < gno+1; i++) {
                            var tile = document.getElementById("t" + gsize + i);
                            tile.style.display = "inline-block";
                        }
                        start_timer();
                    }
                    ti--;
                }, 1000);
                start.innerHTML = " ";
            }

            function num() {
                for (var i = 1; i < gno+1; i++) {
                    nos[i - 1] = i;
                    ind[i - 1] = 0;
                }
                nos = shuffle(nos);
                for (var i = 1; i < gno+1; i++) {
                    var t = document.getElementById("t" + gsize + i);
                    t.innerHTML = nos[i - 1];
                    t.style.pointerEvents = 'none';
                    ind[nos[i - 1] - 1] = i;
                    var r = Ra + ((Rb - Ra) / max) * nos[i - 1]
                      , g = Ga + ((Gb - Ga) / max) * nos[i - 1]
                      , b = Ba + ((Bb - Ba) / max) * nos[i - 1];
                    t.style.backgroundColor = "rgb(" + r + "," + g + "," + b + ")"

                }

                document.getElementById("t" + gsize + ind[count]).style.pointerEvents = 'auto';
                document.getElementById("t" + gsize + ind[count++]).style.cursor = 'pointer';
            }

            function shuffle(array) {
                var i = array.length, j = 0, temp;
                while (i--) {
                    j = Math.floor(Math.random() * (i + 1));
                    temp = array[i];
                    array[i] = array[j];
                    array[j] = temp;
                }
                return array;
            }

            function tilesoff() {
            	var tiles = document.getElementsByClassName('tile');
            	for (var i = 0; i < tiles.length; i++) {
            		var tile = tiles[i];
            		tile.style.display = "none";
            	}
            }

            function change(n) {
                if (n==5) {
                    box4.style.display = "none";
                    box5.style.display = "block";
                    document.getElementById("s4").style.display = "none";
                    document.getElementById("s5").style.display = "block";
                }
                else if (n==4) {
                    box5.style.display = "none";
                    box4.style.display = "block";
                    document.getElementById("s5").style.display = "none";
                    document.getElementById("s4").style.display = "block";
                }
            }

            function changebs(n) {
                var bs1,bs2;
                if(n==5) {
                    bs1 = document.getElementById("bs5");
                    bs2 = document.getElementById("bs4");
                }
                else if(n==4) {
                    bs1 = document.getElementById("bs4");
                    bs2 = document.getElementById("bs5");
                } 
                bs1.style.display = "block";
                bs2.style.display = "none";
            }

            window.onload = function() {

                box5 = document.getElementById("b5");
                box4 = document.getElementById("b4");  

                var tiles = document.getElementsByClassName('tile');

                for (var i = 0; i < tiles.length; i++) {
                    var tile = tiles[i];
                    tile.onclick = function() {
                        document.getElementById("sound").play();
                        if (parseInt(this.innerHTML) < (max+1-gno)) {
                            var no = parseInt(this.innerHTML) + gno;
                            var r = Ra + ((Rb - Ra) / max) * (no)
                              , g = Ga + ((Gb - Ga) / max) * (no)
                              , b = Ba + ((Bb - Ba) / max) * (no);
                            this.style.backgroundColor = "rgb(" + r + "," + g + "," + b + ")";
                            this.innerHTML = no;
                            this.style.pointerEvents = 'none';
                            this.style.cursor = 'auto';
                            document.getElementById("t" + gsize + ind[count]).style.pointerEvents = 'auto';
                            document.getElementById("t" + gsize + ind[count++]).style.cursor = 'pointer';
                        }
                        else {
                            this.classList.add("notile");
                            this.style.cursor = 'auto';
                            this.innerHTML = "&nbsp";
                            this.style.pointerEvents = 'none';
                            if (count < gno) {
                                document.getElementById("t" + gsize + ind[count]).style.pointerEvents = 'auto';
                                document.getElementById("t" + gsize + ind[count++]).style.cursor = 'pointer';
                            } else {
                                document.getElementById("t" + gsize + ind[count - gno]).style.pointerEvents = 'auto';
                                document.getElementById("t" + gsize + ind[count++ - gno]).style.cursor = 'pointer';
                            }
                            if (count == max+1) {
                                clearInterval(timer);
                                var nhs = newbest();
                                var result = document.getElementById("result"+gsize);
                                result.style.display = "block";
                                var res = document.getElementById("res"+gsize);
                                res.innerHTML = (time-0.01).toFixed(2);
                                if (nhs) {
                                    var nhs = document.getElementById("sh"+gsize);
                                    nhs.innerHTML = "New High Score";
                                    nhs.style.fontSize = "3rem";
                                } 
                                else {
                                    var nhs = document.getElementById("sh"+gsize);
                                    nhs.innerHTML = "Your Score";
                                    nhs.style.fontSize = "4rem";
                                }
                                tilesoff();
                            }
                        }
                    }
                }

                var bscores = document.getElementById("bscores4");
                var bshtml = "<ol>";
                for (var y = 0; y < best4.length; y++) {
                    bshtml += ("<li>" + best4[y] + "</li>");
                }
                if (bshtml == "<ol>") bscores.innerHTML = "<p>No Best Score</p>";
                else bscores.innerHTML = bshtml+"</ol>";

                bscores = document.getElementById("bscores5");
                bshtml = "<ol>";
                for (var y = 0; y < best5.length; y++) {
                    bshtml += ("<li>" + best5[y] + "</li>");
                }
                if (bshtml == "<ol>") bscores.innerHTML = "<p>No Best Score</p>";
                else bscores.innerHTML = bshtml+"</ol>";

                var reset = document.getElementById("reset");
                reset.onclick = function() {
                    clearInterval(timer);
                    var result = document.getElementById("result4");
                    result.style.display = "none";
                    result = document.getElementById("result5");
                    result.style.display = "none";
                    time = 0;
                    for (var i = 1; i < gno+1; i++) {
                        var tile = document.getElementById("t" + gsize + i);
                        tile.style.display = "none";
                        tile.classList.remove("notile");
                    }
                    document.getElementsByClassName("choose")[0].style.display = "block";
                    document.getElementsByClassName("choose")[1].style.display = "block";
                    document.getElementById("s"+gsize).style.display = "block";
                    document.getElementById("reset").style.display = "none";
                    var ti = document.getElementById("timer");
                    ti.innerHTML = "0.00";
                }

                var close = document.getElementsByClassName("close")[0];
                close.onclick = function() {
                    document.getElementById("bsdisp").style.display = "none";
                }

                var open = document.getElementById("tops");
                open.onclick = function() {
                    document.getElementById("bsdisp").style.display = "block";
                }

            }
        </script>
    </body>
</html>
